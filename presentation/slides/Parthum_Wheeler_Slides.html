<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Understanding the Code of Federal Regulations Through Natural Language Processing</title>
    <meta charset="utf-8" />
    <meta name="author" content="Bryan Parthum and Will Wheeler" />
    <meta name="author" content="U.S. EPA, National Center for Environmental Economics" />
    <meta name="date" content="2020-10-15" />
    <script src="Parthum_Wheeler_Slides_files/header-attrs-2.4.2/header-attrs.js"></script>
    <link href="Parthum_Wheeler_Slides_files/anchor-sections-1.0/anchor-sections.css" rel="stylesheet" />
    <script src="Parthum_Wheeler_Slides_files/anchor-sections-1.0/anchor-sections.js"></script>
    <link rel="stylesheet" href="Parthum_Wheeler_Slides_files/remark-css/default.css" type="text/css" />
    <link rel="stylesheet" href="Parthum_Wheeler_Slides_files/remark-css/epa.css" type="text/css" />
    <link rel="stylesheet" href="Parthum_Wheeler_Slides_files/remark-css/epa-fonts.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">


class: title-slide center

background-image: url(Parthum_Wheeler_Slides_files/EPA_seal.png), url(Parthum_Wheeler_Slides_files/NCEE_seal.png)
background-position: 35% 95%, 61% 93%
background-size: 10%, 20%

&lt;br&gt;
&lt;br&gt;
&lt;h1&gt;Understanding the Code of Federal Regulations through Natural Language Processing&lt;/h1&gt;
&lt;html&gt;&lt;div style='float:left'&gt;&lt;/div&gt;&lt;hr size=1px width=720px&gt;&lt;/html&gt;
&lt;br&gt;
&lt;br&gt;
&lt;h2&gt;Bryan Parthum and Will Wheeler &lt;br&gt; U.S. EPA, National Center for Environmental Economics &lt;br&gt; October 15, 2020&lt;/h2&gt;

---

class: remark-slide

&lt;h1&gt;Motivation&lt;/h1&gt;

&lt;h2&gt;What is the goal?&lt;/h2&gt;

  - The ability to quantify and classify the Code of Federal Regulations (CFR)
  
    - Think of this as capacity building. In order to ask interesting questions, we need to have the infrastructure in place to objectively read, process, and quantify federal documents.

--
count: false

&lt;h2&gt;What do we mean by &lt;span style="color:#01c748"&gt;quantify&lt;/span&gt; and &lt;span style="color:#004fb9"&gt;classify&lt;/span&gt;?&lt;/h2&gt;

--
count: false

  - There are many metrics, each are useful in their own way
    - Complexity within (&lt;span style="color:#01c748"&gt;\# words&lt;/span&gt;, &lt;span style="color:#01c748"&gt;rarity&lt;/span&gt;, etc.)
    - Complexity across (&lt;span style="color:#004fb9"&gt;networks&lt;/span&gt;, &lt;span style="color:#004fb9"&gt;dependencies&lt;/span&gt;, etc.)
  
  - Note: In the CFR, these measures have variation within parts, across parts, and across time

???

Upstream processing that will be used as inputs to other applications
Methods: classification using Bag of Words (BoW), Term Frequency Inverse Document Frequency (TF-IDF)

---

&lt;h1&gt;Text as Data &lt;a href="https://journals.plos.org/plosone/article?id=10.1371/journal.pone.0195750" target="_blank" style="color:white"&gt;.font60[(Gentzkow et al. 2019)]&lt;/a&gt;&lt;/h1&gt;

&lt;br&gt;

&lt;h2&gt;&lt;span style="color:#01c748"&gt;&lt;bf&gt;Quantify:&lt;/bf&gt;&lt;/span&gt;&lt;/h2&gt;

.tab[]1\. Represent raw text `\(\mathcal{D}\)` as a numerical array `\(\bf{C}\)`

&lt;h2&gt;&lt;span style="color:#004fb9"&gt;&lt;bf&gt;Classify:&lt;/bf&gt;&lt;/span&gt;&lt;/h2&gt;

.tab[]2\. Map `\(\bf{C}\)` to predicted class `\(\widehat{\hskip-0.5pt \bf{V}}\)` of unknown class `\(\bf{V}\)`

&lt;h2&gt;Apply:&lt;/h2&gt;

.tab[]3\. Use `\(\widehat{\hskip-0.5pt \bf{V}}\)` in subsequent descriptive or causal analysis

???
1. Reduce the dimensionality of the text
2. Linking the text to categories of interest

---

&lt;h1&gt;NLP in Practice&lt;/h1&gt;

&lt;h2&gt;Economics:&lt;/h2&gt;
  - Effect of regulations on GDP (&lt;a href="https://www.sciencedirect.com/science/article/abs/pii/S1094202520300223" target="_blank"&gt;Coffey et al. 2020&lt;/a&gt;)
  - Tracking evolution of methods in economics (&lt;a href="https://www.aeaweb.org/articles?id=10.1257/pandp.20201058" target="_blank"&gt;Currie et al. 2020&lt;/a&gt;)
  - Understanding how people think about taxes (&lt;a href="https://www.nber.org/papers/w27699" target="_blank"&gt;Stantcheva 2020; NBER&lt;/a&gt;)
  - Valuing climate amenities using social media posts (&lt;a href="https://journals.plos.org/plosone/article?id=10.1371/journal.pone.0195750" target="_blank"&gt;Baylis et al. 2018&lt;/a&gt;, &lt;a href="https://www.sciencedirect.com/science/article/abs/pii/S0047272720300256" target="_blank"&gt;Baylis 2020&lt;/a&gt;)
  - Predicting future citations using referee comments (&lt;a href="https://papers.ssrn.com/sol3/papers.cfm?abstract_id=2496624" target="_blank"&gt;Bandeh-Ahmadi, 2014&lt;/a&gt;)
  - Contract flexibility as a result of environmental regulations (&lt;a href="https://www.sciencedirect.com/science/article/abs/pii/S0144818813000811" target="_blank"&gt;Kosnik, 2014&lt;/a&gt;)


&lt;h2&gt;Government:&lt;/h2&gt;
  - Categorize public comments in rule-making (&lt;a href="https://www.hhs.gov/cto/projects/increasing-efficiency-in-rule-making-with-natural-language-processing/index.html" target="_blank"&gt;HHS and EPA 2014&lt;/a&gt;)
  - Task complexity in EPA's Standard Operating Procedures (&lt;a href="https://journals.sagepub.com/doi/abs/10.1177/1071181319631108" target="_blank"&gt;Bird et al. 2009&lt;/a&gt;)

---

&lt;h1&gt;Why NLP and the CFR?&lt;/h1&gt;

.pull-left-c[&lt;br&gt;&lt;br&gt;
&lt;img src="Parthum_Wheeler_Slides_files/word_count_over_time.png" width="500" height="300"&gt;
]

.pull-right-c[&lt;br&gt;&lt;br&gt;
&lt;img src="Parthum_Wheeler_Slides_files/use_of_CFR_over_time.png" width="500" height="300"&gt;
]

---

&lt;h1&gt;Products&lt;/h1&gt;

&lt;br&gt;
&lt;h2&gt;1. Code and documentation&lt;/h2&gt;
  - Likely all in R, although there might be Python integration (all open source)
  - Public and freely available on GitHub
  

&lt;h2&gt;2. NCEE Working Paper&lt;/h2&gt;
  - Summarize our approach to quantifying the CFR
  - An application to several outcomes of interest

---

&lt;h1&gt;Applications&lt;/h1&gt;

&lt;h2&gt;Regulatory outcomes&lt;/h2&gt;

  - NPDES, SDWA, RCRA, CERCLA (Superfund), etc.
  - Permitting: violations/non-compliance, proportion of applications approved, complaints
  - Litigation: length, contract completeness
  - EPA regulations that fall under other agencies (USGS, USDA, etc.)
  - Regulation across media (are water regs consistent with air, etc.)&lt;sup&gt;1&lt;/sup&gt;

&lt;h2&gt;Environmental outcomes&lt;/h2&gt;

  - Surface water and air quality (WQI/AQI)
  - Drinking water quality, test outcomes, etc.
  - Specific toxics as endpoints (how can we show the different ways that lead is regulated)&lt;sup&gt;1&lt;/sup&gt;

.font60[[1] Examples of outcomes that are internal to the CFR]

---

&lt;h1&gt;Econometrics&lt;/h1&gt;

&lt;h2&gt;What does a regression look like?&lt;/h2&gt;

Outcome of interest `\(y\)` such that: `\(y_{{\small \bf{V}}t}=\bf{X}\beta + \Phi(\bf{C}_{{\small \widehat{\hskip-0.5pt \bf{V}}}t})\delta + \varepsilon_{{\small \bf{V}}t}\)`

  - `\(\bf{C}\)` is upstream NLP processing of `\(\mathcal{D}\)` (&lt;span style="color:#01c748"&gt;quantify&lt;/span&gt;)
  - `\(\widehat{\hskip-0.5pt \bf{V}}\)` is predicted class using ML (&lt;span style="color:#004fb9"&gt;classify&lt;/span&gt;)
  
  - `\(\Phi(\bf{C}_{{\small \widehat{\hskip-0.5pt \bf{V}}}t})\)` can consist of many metrics/features:
    - sum of word/phrase count (simple "token" score)
    - sum of TF-IDF scores in part/subpart
    - relational/network features of other parts `\(\in\mathcal{D}\)`
    - relational/network features of other documents `\(\notin\mathcal{D}\)`
  
---

&lt;h1&gt;Other Applications and Extensions&lt;/h1&gt;

&lt;h2&gt;Other applications and extensions&lt;/h2&gt;
  - Spatial distribution of Title 40 (map network/complexity to geographical units, demographics, industries)
  - Link to ICRs and Guidance
  - Leadership influence on network/complexity (i.e. `\(\bf{C}_{{\small \widehat{\hskip-0.5pt \bf{V}}}t}\)` becomes dependent variable)
  - Apply text methods to permits, consumer confidence reports, FOIA, and on and on

---

&lt;h1&gt;An example from the CFR&lt;/h1&gt;

&lt;h2&gt;Title 40, part , subpart&lt;/h2&gt;
  
---

&lt;h1&gt;Term Frequency-Inverse Document Frequency (TF-IDF)&lt;/h1&gt;

The TF-IDF score `\(\Psi\)`, for word `\(i\)`, of section `\(s\)`, in document `\(d\)`:

`$$\Psi_{isd}=TF_{id} \times IDF_{id}\tag{1}$$`
&lt;br&gt;
where Term Frequency `\(TF\)`:

`$$TF_{isd} = log(1+freq_{is})\tag{2}$$`
&lt;br&gt;
and Inverse Document Frequency `\(IDF\)`:

`$$IDF_{id} = log(\frac{N_{s}}{N_{s}|_{i \in s}})\tag{3}$$`
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script src="macros.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false,
"ratio": "16:9"
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
